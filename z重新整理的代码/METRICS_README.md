# 评估指标说明

训练完成后，模型会在 `./results/` 目录下自动生成以下文件：

## 📁 输出文件

### 1. JSON指标文件
- **文件名**: `subject{N}_metrics.json`
- **内容**: 包含所有评估指标的完整数据
- **用途**: 方便程序读取和进一步分析

### 2. 混淆矩阵图像
- **文件名**: 
  - `subject{N}_confusion_matrix_fusion.png` - 融合模型
  - `subject{N}_confusion_matrix_emg.png` - EMG分支
  - `subject{N}_confusion_matrix_imu.png` - IMU分支
- **用途**: 可视化分类错误模式，适合放入论文

### 3. LaTeX表格
- **文件名**: `subject{N}_metrics_table.tex`
- **内容**: 可直接插入论文的LaTeX表格代码
- **用途**: 快速生成论文表格

## 📊 指标说明

### 性能指标

#### 1. **Accuracy (准确率)**
- 定义：正确预测的样本比例
- 范围：0-100%
- 用途：最直观的性能指标

#### 2. **Precision (精确率)**
- Macro: 各类别精确率的算术平均
- Weighted: 按样本数量加权的平均
- 含义：预测为某类的样本中，真正属于该类的比例

#### 3. **Recall (召回率)**
- Macro: 各类别召回率的算术平均
- Weighted: 按样本数量加权的平均
- 含义：真实某类的样本中，被正确识别的比例

#### 4. **F1-Score**
- 精确率和召回率的调和平均
- 综合评价分类性能
- 对类别不平衡更鲁棒

#### 5. **Cohen's Kappa**
- 范围：-1 到 1
- 解释：
  - 0.81-1.00: 几乎完美一致
  - 0.61-0.80: 显著一致
  - 0.41-0.60: 中等一致
  - 0: 与随机猜测一致
- 优势：消除随机猜测的影响

#### 6. **Top-3/Top-5 Accuracy**
- 定义：真实标签在预测的前3/5个候选中的比例
- 用途：评估模型的置信度分布
- 实用价值：多候选推荐场景

### 效率指标

#### 7. **Params (参数量)**
- Total Params: 模型总参数数量
- Trainable Params: 可训练参数数量
- 单位：M (百万)
- 用途：评估模型复杂度

#### 8. **FLOPs (浮点运算次数)**
- 单位：G (十亿次)
- 理论计算复杂度
- 注意：动态图操作（如注意力）可能不准确

#### 9. **Inference Time (推理时间)**
- Batch Time: 一个batch (64样本) 的推理时间
- Single Sample Time: 单样本推理时间
- FPS: 每秒处理帧数 (1000 / 单样本时间)
- 单位：毫秒 (ms)
- 用途：评估实际应用的实时性

## 📝 论文使用建议

### 必须报告的指标
1. Overall Accuracy
2. Precision/Recall/F1 (Macro)
3. Cohen's Kappa
4. 总参数量
5. 推理时间

### 推荐展示的图表
1. 融合模型的混淆矩阵（主图）
2. 三个分支的性能对比表格
3. 各模态的混淆矩阵对比（可选）

### 表格示例

在论文中可以这样呈现：

```
Table 1: Model Performance and Efficiency
┌─────────┬───────┬───────┬───────┬────────┬──────┬─────┐
│ Branch  │ Acc   │ F1    │ Kappa │ Params │ Time │ FPS │
│         │ (%)   │ (%)   │       │ (M)    │ (ms) │     │
├─────────┼───────┼───────┼───────┼────────┼──────┼─────┤
│ EMG     │ 92.36 │ 91.85 │ 0.918 │  2.1   │  -   │  -  │
│ IMU     │ 84.03 │ 83.42 │ 0.834 │  2.3   │  -   │  -  │
│ Fusion  │ 95.40 │ 95.12 │ 0.951 │  1.5   │  -   │  -  │
│ Overall │ 97.83 │ 97.65 │ 0.976 │  5.9   │ 6.8  │ 9434│
└─────────┴───────┴───────┴───────┴────────┴──────┴─────┘
```

## 💡 指标解读建议

1. **如果Accuracy很高但Kappa较低**：可能存在类别不平衡
2. **如果某个分支混淆矩阵对角线很亮**：该分支性能好
3. **如果某些类别经常混淆**：分析这些手势的相似性
4. **如果Top-5明显高于Top-1**：模型有一定的不确定性
5. **如果推理时间过长**：考虑模型压缩或优化

## 🔧 依赖安装

评估功能需要以下额外依赖：

```bash
pip install scikit-learn matplotlib seaborn
pip install thop  # 可选，用于FLOPs计算
```

